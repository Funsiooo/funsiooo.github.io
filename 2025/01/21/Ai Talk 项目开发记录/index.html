<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="一、前言Ai Talk 项目是根据个人使用习惯编写的一款款平台的 AI 大模型对话客户端应用。可利用该框架构建任何属于自己的跨平台客户端，因为本质上只是将 Web 应用封装成客户端。  项目地址：https:&#x2F;&#x2F;github.com&#x2F;Funsiooo&#x2F;Ai-Talk  二、程序介绍2.1 简介Ai Talk 是一款集合了多种大语言模型应用的开源桌面客户端，基于 Electron 构建。Electr">
<meta property="og:type" content="article">
<meta property="og:title" content="应用开发- Ai Talk 应用开发流程记录文档">
<meta property="og:url" content="http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="世间闲客·此闲行">
<meta property="og:description" content="一、前言Ai Talk 项目是根据个人使用习惯编写的一款款平台的 AI 大模型对话客户端应用。可利用该框架构建任何属于自己的跨平台客户端，因为本质上只是将 Web 应用封装成客户端。  项目地址：https:&#x2F;&#x2F;github.com&#x2F;Funsiooo&#x2F;Ai-Talk  二、程序介绍2.1 简介Ai Talk 是一款集合了多种大语言模型应用的开源桌面客户端，基于 Electron 构建。Electr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/example1.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/example2.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/example3.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/build.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/build2.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/build3.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/1.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/2.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/3.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/4.png">
<meta property="og:image" content="http://example.com/images/ai/ai_talk/5.png">
<meta property="article:published_time" content="2025-01-21T13:19:11.000Z">
<meta property="article:modified_time" content="2025-01-23T02:47:27.586Z">
<meta property="article:author" content="Funsiooo">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="开发记录">
<meta property="article:tag" content="开源">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/ai/ai_talk/example1.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/logo-1.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/logo-1.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/logo-1.png">
        
      
    
    <!-- title -->
    <title>应用开发- Ai Talk 应用开发流程记录文档</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
		<script type="text/x-mathjax-config">
		  MathJax.Hub.Config({
			tex2jax: {
			  skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
			  inlineMath: [['$','$']]
			}
		  });
		</script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
	

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css" />

<meta name="generator" content="Hexo 5.4.2"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body class="max-width mx-auto px3 ">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="目录"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="顶部" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">首页</a></li><!--
     --><!--
       --><li><a href="/archives/">归档</a></li><!--
     --><!--
       --><li><a href="/search/">搜索</a></li><!--
     --><!--
       --><li><a href="/tags/">标签</a></li><!--
     --><!--
       --><li><a href="/about/">关于</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="上一篇" href="/2025/01/29/%E5%B0%8F%E7%AB%99%E6%9D%82%E8%B4%A7%E5%BA%97-%E9%9A%8F%E5%BF%83%E8%80%8C%E8%A1%8C%E3%80%81%E7%A8%B3%E4%B8%AD%E6%B1%82%E8%BF%9B%E3%80%81%E6%8A%97%E4%BA%89%E4%B8%AD%E6%8E%A5%E5%8F%97/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="下一篇" href="/2025/01/19/APP%E6%B5%8B%E8%AF%95%E7%B3%BB%E5%88%97-%E7%BB%95%E8%BF%87%20TracerPID%20%E6%A3%80%E6%B5%8B%20Hook%20%E5%8A%A0%E5%AF%86%E6%95%B0%E6%8D%AE/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="返回顶部" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="分享文章" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&text=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&is_video=false&description=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=应用开发- Ai Talk 应用开发流程记录文档&body=Check out this article: http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&name=应用开发- Ai Talk 应用开发流程记录文档&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&t=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">一、前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%A8%8B%E5%BA%8F%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">二、程序介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 功能介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 大模型使用规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%BA%90%E7%A0%81%E5%90%AF%E5%8A%A8"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 源码启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E6%89%93%E5%8C%85"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 打包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">三、开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Electron-%E5%AE%89%E8%A3%85"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 Electron 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-Node-%E5%AE%89%E8%A3%85"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 Node 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E5%88%9D%E5%A7%8B%E5%8C%96-Electron-%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 初始化 Electron 项目</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%9C%AC%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 本项目开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E6%A0%91"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 项目文件树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E7%A8%8B%E5%BA%8F%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 程序核心流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 主要功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-4-%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4 代码分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-5-%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">3.2.5 自定义</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">四、总结</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        应用开发- Ai Talk 应用开发流程记录文档
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Funsiooo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-01-21T13:19:11.000Z" itemprop="datePublished">2025-01-21</time>
        
        (Updated: <time datetime="2025-01-23T02:47:27.586Z" itemprop="dateModified">2025-01-23</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">应用开发</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/AI/" rel="tag">AI</a>, <a class="tag-link-link" href="/tags/%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/" rel="tag">开发记录</a>, <a class="tag-link-link" href="/tags/%E5%BC%80%E6%BA%90/" rel="tag">开源</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>Ai Talk 项目是根据个人使用习惯编写的一款款平台的 AI 大模型对话客户端应用。可利用该框架构建任何属于自己的跨平台客户端，因为本质上只是将 Web 应用封装成客户端。</p>
<blockquote>
<p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/Funsiooo/Ai-Talk">https://github.com/Funsiooo/Ai-Talk</a></p>
</blockquote>
<h2 id="二、程序介绍"><a href="#二、程序介绍" class="headerlink" title="二、程序介绍"></a>二、程序介绍</h2><h3 id="2-1-简介"><a href="#2-1-简介" class="headerlink" title="2.1 简介"></a>2.1 简介</h3><p><strong>Ai Talk</strong> 是一款集合了多种大语言模型应用的开源桌面客户端，基于 Electron 构建。Electron 是一个由 GitHub 开发的开源框架，用于构建跨平台的桌面应用程序。它通过结合 <strong>Chromium</strong> 浏览器引擎和 <strong>Node.js</strong> 运行时环境，允许开发者使用 <strong>HTML、CSS 和 JavaScript</strong> 等前端技术开发桌面应用，同时支持调用底层系统功能（如文件系统、系统通知等）。当前支持以下大模型：OpenAI ChatGPT、Google Gemini、Quora Poe、月之暗面 Kimi、字节 豆包、阿里 通义千问、腾讯 元宝、百度 文心一言。 </p>
<blockquote>
<p>📑   <strong>Note：</strong> OpenAi ChatGPT、Google Gemini 、Quora Poe 需要设置网络代理才能正常访问（国外友人则无需代理）。</p>
</blockquote>
<h3 id="2-2-功能介绍"><a href="#2-2-功能介绍" class="headerlink" title="2.2 功能介绍"></a>2.2 功能介绍</h3><p><strong>界面：</strong> 程序主要由两部分组成：左侧的侧边栏和右侧的显示区域。点击左侧的某个大模型，右侧将加载该大模型的官方页面，即可开始对话。</p>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/example1.png" data-caption="example1"><img src="/../images/ai/ai_talk/example1.png" alt="example1"></a></p>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/example2.png" data-caption="example2"><img src="/../images/ai/ai_talk/example2.png" alt="example2"></a></p>
<p><strong>网络代理：</strong> 由于 <strong>OpenAI ChatGPT</strong> 、 <strong>Google Gemini</strong> 、<strong>Quora Poe</strong> 模型需要访问国外网站，因此在使用之前，需要在左侧侧边栏下方的 “网络设置” 中配置代理网络。目前只支持 <strong>HTTP</strong> 和 <strong>HTTPS</strong> 协议。配置步骤如下：</p>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1）点击 “网络设置” ，在弹窗输入代理地址，如：本地开启了 7890 端口为代理网络端口，填入 http://127.0.0.1:7890 </span><br><span class="line">2）点击 “设置代理” ，完成网络设置</span><br><span class="line">3）如网络设置输入错误，点击 “清除代理” 即可恢复程序默认设置</span><br><span class="line">4）设置完毕后点击 “关闭” </span><br></pre></td></tr></table></figure></div>

<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/example3.png" data-caption="example3"><img src="/../images/ai/ai_talk/example3.png" alt="example3"></a></p>
<h3 id="2-3-大模型使用规则"><a href="#2-3-大模型使用规则" class="headerlink" title="2.3 大模型使用规则"></a>2.3 大模型使用规则</h3><div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">| 模型名称        | 使用规则                                                     |</span><br><span class="line">| -------------- | ------------------------------------------------------------ |</span><br><span class="line">| 月之暗面 Kimi   | 消息条数限制：免费使用，不限次数。                           |</span><br><span class="line">| 通义千问        | 消息条数限制：免费使用，不限次数。                           |</span><br><span class="line">| 字节 豆包       | 消息条数限制：免费使用，不限次数。                           |</span><br><span class="line">| 腾讯 元宝       | 消息条数限制：免费使用，不限次数。                           |</span><br><span class="line">| 百度 文心一言    | 消息条数限制：3.5 模型免费使用，其它模型存在次数限制。         |</span><br><span class="line">| OpenAi ChatGPT | 消息条数限制：免费套餐用户在 5 小时内只能使用 GPT-4o 的有限次数，使用完毕回退其它模型，如：GPT-3.5 。【 官方文档链接：https://help.openai.com/en/articles/9275245-using-chatgpt-s-free-tier-faq#h_43513320b9】 |</span><br><span class="line">| Google  Gemini | 消息条数限制：1.5 flash 免费使用，存在次数限额，限额不详。【官方文档：https://gemini.google.com/faq】 |</span><br><span class="line">| Quora Poe      | 消息条数限制：存在次数限额，限额不详。                       |</span><br></pre></td></tr></table></figure></div>





<h3 id="2-4-源码启动"><a href="#2-4-源码启动" class="headerlink" title="2.4 源码启动"></a>2.4 源码启动</h3><ul>
<li>安装 nodejs</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://nodejs.org/zh-cn/download</span><br></pre></td></tr></table></figure></div>

<ul>
<li>下载项目源码</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Funsiooo/Ai-Talk.git</span><br></pre></td></tr></table></figure></div>

<ul>
<li>安装 electron</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Ai-Talk</span><br><span class="line">npm install electron --save-dev -d --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure></div>


<ul>
<li>Ai Talk 目录下执行</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure></div>



<h3 id="2-5-打包"><a href="#2-5-打包" class="headerlink" title="2.5 打包"></a>2.5 打包</h3><ul>
<li>安装 node.js</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://nodejs.org/zh-cn/download</span><br></pre></td></tr></table></figure></div>

<ul>
<li>下载项目源码</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Funsiooo/Ai-Talk.git</span><br></pre></td></tr></table></figure></div>

<ul>
<li>安装 electron</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd Ai-Talk</span><br><span class="line">npm install electron --save-dev -d --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure></div>



<ul>
<li>安装 electron-forge&#x2F;cli</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @electron-forge/cli -d --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure></div>

<ul>
<li>macos 安装 @electron-forge&#x2F;maker-dmg</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev  -d @electron-forge/maker-dmg --registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure></div>

<ul>
<li>Ai Talk 目录下执行，打包文件存放在 out 目录下（打包过程中若出现报错可忽略）</li>
</ul>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>📑   <strong>Note：</strong> 自行打包需要根据自身设备替换项目中的 package.json 文件, 目前提供 <strong>Mac Apple silicon</strong>、<strong>Windows</strong> 打包文件, 文件见 config 文件夹。</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/build.png" data-caption="build"><img src="/../images/ai/ai_talk/build.png" alt="build"></a></p>
<h2 id="三、开发流程"><a href="#三、开发流程" class="headerlink" title="三、开发流程"></a>三、开发流程</h2><h3 id="3-1-Electron-安装"><a href="#3-1-Electron-安装" class="headerlink" title="3.1 Electron 安装"></a>3.1 Electron 安装</h3><h4 id="3-1-1-Node-安装"><a href="#3-1-1-Node-安装" class="headerlink" title="3.1.1 Node 安装"></a>3.1.1 Node 安装</h4><blockquote>
<p> macOS 使用 brew 安装，win 直接官网下载安装即可</p>
</blockquote>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew install node</span><br><span class="line"></span><br><span class="line">funsiooo@macbook-pro ~ % node -v</span><br><span class="line">v23.3.0</span><br><span class="line">funsiooo@macbook-pro ~ % npm -v </span><br><span class="line">10.9.0</span><br></pre></td></tr></table></figure></div>



<h4 id="3-1-2-初始化-Electron-项目"><a href="#3-1-2-初始化-Electron-项目" class="headerlink" title="3.1.2 初始化 Electron 项目"></a>3.1.2 初始化 Electron 项目</h4><p>1）创建项目目录,使用 npm 初始化项目</p>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir Ai_Talk</span><br><span class="line">cd Ai_Talk</span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure></div>



<p>2）项目中安装 Electron，可能会存在网络问题，建议 npm 设置国内源，有条件代理的直接全局代理</p>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1）设置 npm 源</span><br><span class="line">npm config set registry https://registry.npmmirror.com	# 使用淘宝镜像</span><br><span class="line">npm config set registry https://registry.npmjs.org			# 恢复回默认的 npm 官方镜像</span><br><span class="line"></span><br><span class="line">2）electron 安装，选当前目录下安装即可</span><br><span class="line">npm install electron --save-dev	-d	# 在创建的项目文件夹内安装</span><br><span class="line">npm install -g electron -d					# 全局安装，即安装在本级上</span><br></pre></td></tr></table></figure></div>

<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/build2.png" data-caption="build"><img src="/../images/ai/ai_talk/build2.png" alt="build"></a></p>
<p>3）构建第一个程序</p>
<p>官方教程：<a target="_blank" rel="noopener" href="https://www.electronjs.org/zh/docs/latest/tutorial/tutorial-first-app">https://www.electronjs.org/zh/docs/latest/tutorial/tutorial-first-app</a> , 项目文件如下</p>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">├── index.html              # 主页面</span><br><span class="line">├── main.js                 # 主进程入口文件</span><br><span class="line">├── node_modules            # Electron 项目依赖</span><br><span class="line">├── package-lock.json       # NPM 锁定文件</span><br><span class="line">└── package.json            # 项目依赖及元数据</span><br></pre></td></tr></table></figure></div>



<blockquote>
<p>index.html</p>
</blockquote>
<div class="highlight-wrap" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Security-Policy&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">      <span class="attr">http-equiv</span>=<span class="string">&quot;X-Content-Security-Policy&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">content</span>=<span class="string">&quot;default-src &#x27;self&#x27;; script-src &#x27;self&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello from Electron renderer!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello from Electron renderer!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>👋<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./renderer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<blockquote>
<p> main.js</p>
</blockquote>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">createWindow</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> win = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">800</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">600</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  win.<span class="title function_">loadFile</span>(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createWindow</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>package.json</p>
</blockquote>
<div class="highlight-wrap" data-rel="Json"><figure class="iseeu highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-electron-app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello World!&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;main.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;electron .&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jane Doe&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MIT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;electron&quot;</span><span class="punctuation">:</span> <span class="string">&quot;23.1.3&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div>



<p>启动程序</p>
<div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure></div>



<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/build3.png" data-caption="build"><img src="/../images/ai/ai_talk/build3.png" alt="build"></a></p>
<h3 id="3-2-本项目开发流程"><a href="#3-2-本项目开发流程" class="headerlink" title="3.2 本项目开发流程"></a>3.2 本项目开发流程</h3><h4 id="3-2-1-项目文件树"><a href="#3-2-1-项目文件树" class="headerlink" title="3.2.1 项目文件树"></a>3.2.1 项目文件树</h4><div class="highlight-wrap" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">Ai-Talk/                     # 项目根目录</span><br><span class="line">├── LICENSE                  # 开源许可证</span><br><span class="line">├── README.md                # 项目说明文档</span><br><span class="line">├── assets/                  # 静态资源目录</span><br><span class="line">├── config/                  # 打包文件目录</span><br><span class="line">│   ├── macos/               # macOS 平台打包配置文件目录</span><br><span class="line">│   │   └── package.json     # macOS 平台打包配置文件</span><br><span class="line">│   └── windows/             # Windows 平台打包配置文件目录</span><br><span class="line">│       ├── css.zip          # 样式压缩包，mac与windows样式差异，win打包可替换该css</span><br><span class="line">│       └── package.json     # Windows 平台打包配置文件</span><br><span class="line">├── doc/                     # 文档目录</span><br><span class="line">│   └── README_EN.md         # 英文项目说明文档</span><br><span class="line">├── forge.config.js          # Electron Forge 配置文件</span><br><span class="line">├── main.js                  # 主进程入口文件</span><br><span class="line">├── package-lock.json        # NPM 锁定文件</span><br><span class="line">├── package.json             # 项目依赖及元数据</span><br><span class="line">└── src/                     # 源代码目录</span><br><span class="line">    ├── css/                 # 样式文件目录</span><br><span class="line">    │   ├── proxy.css        # 代理设置相关样式</span><br><span class="line">    │   ├── second.css       # 程序对话页面样式</span><br><span class="line">    │   ├── style.css        # 主页面通用样式</span><br><span class="line">    │   └── version.css      # 关于程序页面样式</span><br><span class="line">    ├── js/                  # 脚本文件目录</span><br><span class="line">    │   ├── preload.js       # 预加载脚本</span><br><span class="line">    │   └── renderer.js      # 渲染进程脚本</span><br><span class="line">    └── view/                # HTML 文件目录</span><br><span class="line">        ├── about.html       # 关于程序页面</span><br><span class="line">        ├── index.html       # 主页面</span><br><span class="line">        ├── proxy.html       # 代理弹窗页面</span><br><span class="line">        └── second.html      # 程序对话页面</span><br></pre></td></tr></table></figure></div>



<h4 id="3-2-2-程序核心流程"><a href="#3-2-2-程序核心流程" class="headerlink" title="3.2.2 程序核心流程"></a>3.2.2 程序核心流程</h4><p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/1.png" data-caption="flow"><img src="/../images/ai/ai_talk/1.png" alt="flow"></a></p>
<ul>
<li><strong>main.js:</strong> 主进程入口，负责创建窗口、管理应用生命周期和处理系统交互。需要展示如何创建BrowserWindow实例，加载页面，以及处理IPC事件。</li>
<li><strong>Preload.js:</strong> 预加载脚本，作为主进程和渲染进程之间的桥梁，暴露有限的Node.js功能给渲染进程。需要说明contextBridge和ipcRenderer的使用。</li>
<li><strong>index.html:</strong> 主页面模板，渲染进程加载的HTML结构。需要包含对渲染脚本的引用，并展示如何调用预加载的API。 </li>
<li><strong>Renderer.js:</strong> 渲染进程脚本，处理用户界面交互，通过预加载脚本与主进程通信。需要事件监听和更新UI的示例。</li>
</ul>
<h4 id="3-2-3-主要功能"><a href="#3-2-3-主要功能" class="headerlink" title="3.2.3 主要功能"></a>3.2.3 主要功能</h4><p><strong>官方Web服务集成</strong></p>
<ul>
<li>采用 Electron <code>WebView</code> 组件无缝加载官方网页，实现跨平台封装（无需重复开发 UI&#x2F;交互逻辑）</li>
</ul>
<p><strong>对话分栏布局</strong></p>
<ul>
<li><strong>左侧面板</strong>：对话大模型选择、代理设置等功能</li>
<li><strong>右侧主界面</strong>：显示左侧选择的大模型官方页面，开启对话模式</li>
</ul>
<p><strong>网络代理模块</strong></p>
<ul>
<li>Electron <code>session.setProxy</code> API 实现代理设置功能</li>
</ul>
<h4 id="3-2-4-代码分析"><a href="#3-2-4-代码分析" class="headerlink" title="3.2.4 代码分析"></a>3.2.4 代码分析</h4><blockquote>
<p><strong>main.js 分析</strong></p>
</blockquote>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span>, ipcMain, dialog, nativeImage &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mainWindow;</span><br><span class="line"><span class="keyword">let</span> proxyWindow;</span><br><span class="line"><span class="keyword">let</span> versionWindow</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 创建主窗口</span></span><br><span class="line">  mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">1260</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">830</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;assets/logo.ico&#x27;</span>,</span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">devTools</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">contextIsolation</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">webviewTag</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;preload.js&#x27;</span>),</span><br><span class="line">      <span class="attr">enableRemoteModule</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">nativeWindowOpen</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">webSecurity</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">allowRunningInsecureContent</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 隐藏electron menu</span></span><br><span class="line">  mainWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载初始页面</span></span><br><span class="line">  mainWindow.<span class="title function_">loadFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;view&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>));</span><br><span class="line"></span><br><span class="line">  mainWindow.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    mainWindow = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建用于输入代理的自定义窗口</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createProxyWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  proxyWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">370</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">250</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;assets/logo.ico&#x27;</span>,</span><br><span class="line">    <span class="attr">parent</span>: mainWindow,</span><br><span class="line">    <span class="attr">modal</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">false</span>,  <span class="comment">// 初始时不显示</span></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>,<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;preload.js&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  proxyWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  proxyWindow.<span class="title function_">loadFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;view&#x27;</span>, <span class="string">&#x27;proxy.html&#x27;</span>));</span><br><span class="line">  proxyWindow.<span class="title function_">once</span>(<span class="string">&#x27;ready-to-show&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    proxyWindow.<span class="title function_">show</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听关闭窗口事件</span></span><br><span class="line">  proxyWindow.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    proxyWindow = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听渲染进程发送的请求来打开代理输入窗口</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;open-proxy-dialog&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createProxyWindow</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置代理</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;set-proxy&#x27;</span>, <span class="function">(<span class="params">event, proxyAddress</span>) =&gt;</span> &#123;</span><br><span class="line">  mainWindow.<span class="property">webContents</span>.<span class="property">session</span>.<span class="title function_">setProxy</span>(&#123;</span><br><span class="line">    <span class="attr">proxyRules</span>: <span class="string">`http=<span class="subst">$&#123;proxyAddress&#125;</span>;https=<span class="subst">$&#123;proxyAddress&#125;</span>`</span>,</span><br><span class="line">    <span class="attr">proxyBypassRules</span>: <span class="string">&#x27;&lt;local&gt;&#x27;</span> <span class="comment">// 可选：不通过代理的地址</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    mainWindow.<span class="property">webContents</span>.<span class="title function_">reload</span>(); <span class="comment">// 设置代理后重新加载页面</span></span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;设置代理失败:&#x27;</span>, err);</span><br><span class="line">    dialog.<span class="title function_">showErrorBox</span>(<span class="string">&#x27;设置代理失败&#x27;</span>, <span class="string">&#x27;无法设置代理: &#x27;</span> + err.<span class="property">message</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除代理并恢复默认设置</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;clear-proxy&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  mainWindow.<span class="property">webContents</span>.<span class="property">session</span>.<span class="title function_">clearCache</span>() <span class="comment">// 清除缓存</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 恢复默认代理设置</span></span><br><span class="line">      <span class="keyword">return</span> mainWindow.<span class="property">webContents</span>.<span class="property">session</span>.<span class="title function_">setProxy</span>(&#123;&#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      mainWindow.<span class="property">webContents</span>.<span class="title function_">reload</span>(); <span class="comment">// 重新加载页面</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;代理已清除，恢复默认设置&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;清除代理失败:&#x27;</span>, err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建用于输入显示“关于程序”的自定义窗口</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createVersionWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  versionWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="number">685</span>,</span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;assets/logo.ico&#x27;</span>,</span><br><span class="line">    <span class="attr">parent</span>: mainWindow,</span><br><span class="line">    <span class="attr">modal</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">false</span>,  <span class="comment">// 初始时不显示</span></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>,<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;preload.js&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  versionWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  versionWindow.<span class="title function_">loadFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;view&#x27;</span>, <span class="string">&#x27;about.html&#x27;</span>));</span><br><span class="line">  versionWindow.<span class="title function_">once</span>(<span class="string">&#x27;ready-to-show&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    versionWindow.<span class="title function_">show</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 监听关闭窗口事件</span></span><br><span class="line">  versionWindow.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    versionWindow = <span class="literal">null</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听渲染进程发送的请求来打开窗口</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;open-version-dialog&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createVersionWindow</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">whenReady</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createWindow</span>();</span><br><span class="line"></span><br><span class="line">  app.<span class="title function_">on</span>(<span class="string">&#x27;activate&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">BrowserWindow</span>.<span class="title function_">getAllWindows</span>().<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="title function_">createWindow</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">on</span>(<span class="string">&#x27;window-all-closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (process.<span class="property">platform</span> !== <span class="string">&#x27;darwin&#x27;</span>) &#123;</span><br><span class="line">    app.<span class="title function_">quit</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<p>引入模块</p>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; app, <span class="title class_">BrowserWindow</span>, ipcMain, dialog, nativeImage &#125; = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br></pre></td></tr></table></figure></div>

<table>
<thead>
<tr>
<th align="left">模块名称</th>
<th align="left">用途</th>
<th align="left">典型场景示例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>app</code></td>
<td align="left">管理应用生命周期（启动、退出）</td>
<td align="left"><code>app.whenReady().then(createWindow)</code></td>
</tr>
<tr>
<td align="left"><code>BrowserWindow</code></td>
<td align="left">创建和控制浏览器窗口</td>
<td align="left"><code>new BrowserWindow(&#123; width: 800 &#125;)</code></td>
</tr>
<tr>
<td align="left"><code>ipcMain</code></td>
<td align="left">主进程的进程间通信模块（与渲染进程 <code>ipcRenderer</code> 交互）</td>
<td align="left"><code>ipcMain.handle(&#39;event&#39;, callback)</code></td>
</tr>
<tr>
<td align="left"><code>dialog</code></td>
<td align="left">显示系统对话框（文件选择、消息提示等）</td>
<td align="left"><code>dialog.showOpenDialog(options)</code></td>
</tr>
<tr>
<td align="left"><code>nativeImage</code></td>
<td align="left">处理系统原生图片（如图标、截图）</td>
<td align="left"><code>nativeImage.createFromPath(&#39;img.png&#39;)</code></td>
</tr>
<tr>
<td align="left"><code>path</code></td>
<td align="left">处理文件路径</td>
<td align="left"><code>path.join(__dirname, &#39;src&#39;, &#39;file.js&#39;)</code></td>
</tr>
</tbody></table>
<p>定义窗口函数，该程序主要有三个窗口，<strong>主窗口</strong>、<strong>代理窗口</strong>、<strong>关于程序窗口</strong></p>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mainWindow;</span><br><span class="line"><span class="keyword">let</span> proxyWindow;</span><br><span class="line"><span class="keyword">let</span> versionWindow</span><br></pre></td></tr></table></figure></div>



<p>主窗口 let mainWindow</p>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建并配置应用程序主窗口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 创建主浏览器窗口实例</span></span><br><span class="line">  mainWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="comment">// 基础窗口配置</span></span><br><span class="line">    <span class="attr">width</span>: <span class="number">1260</span>,                <span class="comment">// 初始窗口宽度（像素）</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">830</span>,                <span class="comment">// 初始窗口高度（像素）</span></span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;assets/logo.ico&#x27;</span>,    <span class="comment">// 窗口图标（Windows/Linux 生效，macOS 需单独设置 Dock 图标）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 网页内容安全配置（关键安全设置）</span></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">devTools</span>: <span class="literal">false</span>,          <span class="comment">// 禁用开发者工具（生产环境建议关闭，开发时可动态开启）</span></span><br><span class="line">      <span class="attr">contextIsolation</span>: <span class="literal">true</span>,   <span class="comment">// 启用上下文隔离，隔离主进程与渲染进程（安全必需）</span></span><br><span class="line">      <span class="attr">webviewTag</span>: <span class="literal">true</span>,         <span class="comment">// 启用 &lt;webview&gt; 标签加载外部内容</span></span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;preload.js&#x27;</span>), <span class="comment">// 预加载脚本路径</span></span><br><span class="line">      <span class="attr">enableRemoteModule</span>: <span class="literal">false</span>,<span class="comment">// 禁用 remote 模块，防止渲染进程直接访问主进程 API（安全必需）</span></span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">false</span>,   <span class="comment">// 禁止渲染进程直接访问 Node.js（安全必需）</span></span><br><span class="line">      <span class="attr">nativeWindowOpen</span>: <span class="literal">true</span>,   <span class="comment">// 使用原生 window.open() 行为</span></span><br><span class="line">      <span class="attr">webSecurity</span>: <span class="literal">true</span>,        <span class="comment">// 启用同源策略（CORS 保护）</span></span><br><span class="line">      <span class="attr">allowRunningInsecureContent</span>: <span class="literal">true</span>, <span class="comment">// 允许 HTTPS 页面加载 HTTP 资源</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 隐藏默认菜单栏，若不隐藏，Windows 上会出现 electron 菜单栏，影响程序美观</span></span><br><span class="line">  mainWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载应用主界面</span></span><br><span class="line">  <span class="comment">// 使用 path.join 确保跨平台路径兼容性（Windows/macOS/Linux）</span></span><br><span class="line">  mainWindow.<span class="title function_">loadFile</span>(</span><br><span class="line">    path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;view&#x27;</span>, <span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 窗口关闭事件处理</span></span><br><span class="line">  <span class="comment">// 释放窗口引用避免内存泄漏（Electron 多窗口应用必需）</span></span><br><span class="line">  mainWindow.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    mainWindow = <span class="literal">null</span>;  <span class="comment">// 垃圾回收时释放内存</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<p>代理端口 let proxyWindow;</p>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建代理配置专用窗口（模态对话框）</span></span><br><span class="line"><span class="comment"> * 用于用户输入代理服务器地址</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createProxyWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 创建代理配置窗口实例</span></span><br><span class="line">  proxyWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">370</span>,     <span class="comment">// 窗口宽度（适配常见代理地址输入长度）</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">250</span>,    <span class="comment">// 窗口高度（容纳输入框和操作按钮）</span></span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;assets/logo.ico&#x27;</span>, <span class="comment">// 窗口图标（Windows/Linux）</span></span><br><span class="line">    <span class="attr">parent</span>: mainWindow,  <span class="comment">// 设置父窗口实现模态效果</span></span><br><span class="line">    <span class="attr">modal</span>: <span class="literal">true</span>,    <span class="comment">// 模态窗口（阻止父窗口操作）</span></span><br><span class="line">    <span class="attr">show</span>: <span class="literal">false</span>,    <span class="comment">// 初始隐藏避免闪烁</span></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;preload.js&#x27;</span>) <span class="comment">// 预加载脚本</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 移除默认菜单栏</span></span><br><span class="line">  proxyWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载代理配置页面（建议路径：src/view/proxy.html）</span></span><br><span class="line">  proxyWindow.<span class="title function_">loadFile</span>(</span><br><span class="line">    path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;view&#x27;</span>, <span class="string">&#x27;proxy.html&#x27;</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 页面加载完成后显示窗口（避免白屏）</span></span><br><span class="line">  proxyWindow.<span class="title function_">once</span>(<span class="string">&#x27;ready-to-show&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    proxyWindow.<span class="title function_">show</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 窗口关闭事件处理</span></span><br><span class="line">  proxyWindow.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    proxyWindow = <span class="literal">null</span>; <span class="comment">// 释放内存引用</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IPC 通信：监听打开代理配置窗口请求</span></span><br><span class="line"><span class="comment"> * 渲染进程调用方式：window.electron.ipcRenderer.invoke(&#x27;open-proxy-dialog&#x27;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;open-proxy-dialog&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createProxyWindow</span>(); <span class="comment">// 创建并显示代理窗口,调用的是上方 function createProxyWindow()窗口</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IPC 通信：设置代理服务器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">proxyAddress</span> - 代理地址（格式：host:port）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;set-proxy&#x27;</span>, <span class="function">(<span class="params">event, proxyAddress</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 通过 session 对象设置全局代理</span></span><br><span class="line">  mainWindow.<span class="property">webContents</span>.<span class="property">session</span>.<span class="title function_">setProxy</span>(&#123;</span><br><span class="line">    <span class="attr">proxyRules</span>: <span class="string">`http=<span class="subst">$&#123;proxyAddress&#125;</span>;https=<span class="subst">$&#123;proxyAddress&#125;</span>`</span>, <span class="comment">// 同时代理 HTTP/HTTPS</span></span><br><span class="line">    <span class="attr">proxyBypassRules</span>: <span class="string">&#x27;&lt;local&gt;&#x27;</span> <span class="comment">// 绕过本地地址（localhost, 127.0.0.1 等）</span></span><br><span class="line">  &#125;).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    mainWindow.<span class="property">webContents</span>.<span class="title function_">reload</span>(); <span class="comment">// 重载页面使代理生效</span></span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;设置代理失败:&#x27;</span>, err);</span><br><span class="line">    <span class="comment">// 显示系统级错误对话框</span></span><br><span class="line">    dialog.<span class="title function_">showErrorBox</span>(<span class="string">&#x27;设置代理失败&#x27;</span>, <span class="string">&#x27;无法设置代理: &#x27;</span> + err.<span class="property">message</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IPC 通信：清除代理配置并恢复默认</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;clear-proxy&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 先清除网络缓存</span></span><br><span class="line">  mainWindow.<span class="property">webContents</span>.<span class="property">session</span>.<span class="title function_">clearCache</span>()</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 重置代理设置为空（使用系统默认）</span></span><br><span class="line">      <span class="keyword">return</span> mainWindow.<span class="property">webContents</span>.<span class="property">session</span>.<span class="title function_">setProxy</span>(&#123;&#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      mainWindow.<span class="property">webContents</span>.<span class="title function_">reload</span>(); <span class="comment">// 重载页面应用更改</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;代理已清除，恢复默认设置&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;清除代理失败:&#x27;</span>, err);</span><br><span class="line">      <span class="comment">// 可在此添加错误反馈到渲染进程</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>



<p>关于程序窗口 let versionWindow</p>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 创建显示&quot;关于程序&quot;信息的模态窗口</span></span><br><span class="line"><span class="comment"> * 用于展示版本信息、版权声明、许可证等</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createVersionWindow</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 创建关于窗口实例</span></span><br><span class="line">  versionWindow = <span class="keyword">new</span> <span class="title class_">BrowserWindow</span>(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="number">500</span>,        <span class="comment">// 窗口宽度（适配常见说明文档布局）</span></span><br><span class="line">    <span class="attr">height</span>: <span class="number">685</span>,       <span class="comment">// 窗口高度（容纳长文本和图片）</span></span><br><span class="line">    <span class="attr">icon</span>: <span class="string">&#x27;assets/logo.ico&#x27;</span>,  <span class="comment">// 窗口图标（Windows/Linux 生效）</span></span><br><span class="line">    <span class="attr">parent</span>: mainWindow,<span class="comment">// 父窗口设置（实现模态对话框效果）</span></span><br><span class="line">    <span class="attr">modal</span>: <span class="literal">true</span>,       <span class="comment">// 模态窗口（阻止父窗口交互）</span></span><br><span class="line">    <span class="attr">show</span>: <span class="literal">false</span>,       <span class="comment">// 初始隐藏避免页面加载时闪烁</span></span><br><span class="line">    <span class="attr">webPreferences</span>: &#123;</span><br><span class="line">      <span class="attr">nodeIntegration</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">preload</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;preload.js&#x27;</span>) <span class="comment">// 预加载脚本路径</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 移除默认菜单栏（增强原生应用体验）</span></span><br><span class="line">  versionWindow.<span class="title function_">setMenu</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载关于页面</span></span><br><span class="line">  versionWindow.<span class="title function_">loadFile</span>(</span><br><span class="line">    path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;view&#x27;</span>, <span class="string">&#x27;about.html&#x27;</span>)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 页面加载完成后显示窗口（确保内容渲染完成）</span></span><br><span class="line">  versionWindow.<span class="title function_">once</span>(<span class="string">&#x27;ready-to-show&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    versionWindow.<span class="title function_">show</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 窗口关闭事件处理（内存管理）</span></span><br><span class="line">  versionWindow.<span class="title function_">on</span>(<span class="string">&#x27;closed&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    versionWindow = <span class="literal">null</span>;  <span class="comment">// 释放内存引用防止内存泄漏</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * IPC 通信：监听打开&quot;关于程序&quot;窗口请求</span></span><br><span class="line"><span class="comment"> * 渲染进程调用方式：window.electron.ipcRenderer.invoke(&#x27;open-version-dialog&#x27;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 监听渲染进程发送的请求来打开窗口</span></span><br><span class="line">ipcMain.<span class="title function_">handle</span>(<span class="string">&#x27;open-version-dialog&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createVersionWindow</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>



<blockquote>
<p>Index.html 分析</p>
</blockquote>
<div class="highlight-wrap" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Ai Talk<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  加载 index.html CSS 格式--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../css/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 测边栏 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;sidebar&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- logo --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;logo&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Logo&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;app_name&quot;</span>&gt;</span>Ai Talk<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 对话 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialogue&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;dialogue_text&quot;</span>&gt;</span></span><br><span class="line">          选择对话</span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;action_button&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/dialogue.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Logo&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- AI 模块 --&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai_module&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;kimi&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/kimi.ico&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;kimi&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> 月之暗面 Kimi</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;deepseek&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/deepseek.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;DeepSeek&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> 深度求索 DeepSeek</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;doubao&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/doubao.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;doubao&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> 字节 豆包</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;tyqw&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/tyqw.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;tyqw&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> 啊里 通义千问</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;openai&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/chatgpt.ico&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;OpenAI&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> OpenAI ChatGPT</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;google&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/google.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;google&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> Google Gemini</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;poe&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/poe.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;poe&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> Quora Poe</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;tenxun&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/tenxun.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;tenxun&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> 腾讯 元宝</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;icon-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;wxyy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/wxyy.ico&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;wxyy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon-img&quot;</span>&gt;</span> 百度 文心一言</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- 设置选项列表 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;settings-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;settings-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;home-btn&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/home.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Night Mode Icon&quot;</span>&gt;</span> 回到主页</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;settings-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;set-proxy-btn&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/network.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Language Icon&quot;</span>&gt;</span> 网络设置</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;settings-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;manual-btn&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/manual.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Settings Icon&quot;</span>&gt;</span> 用户手册</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;settings-item&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;version-btn&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../assets/version.svg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Version Icon&quot;</span>&gt;</span> 关于程序</span><br><span class="line">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 右边显示区域 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 使用webview加载，默认加载second.html页面 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">webview</span> <span class="attr">id</span>=<span class="string">&quot;webview&quot;</span> <span class="attr">src</span>=<span class="string">&quot;second.html&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 100vh;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">webview</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--- 引入渲染进程文件 renderer.js--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/renderer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<blockquote>
<p>renderer.js 分析</p>
</blockquote>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*********************** 渲染进程主逻辑 (renderer.js) ***********************/</span></span><br><span class="line"><span class="comment">/* 本文件功能：控制界面交互与 WebView 内容加载，通过预加载脚本与主进程通信 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*--------------------- WebView 元素获取 ---------------------*/</span></span><br><span class="line"><span class="comment">// 获取用于显示网页内容的 WebView 容器，在index.html中已引入该文件（需主进程启用 webviewTag）</span></span><br><span class="line"><span class="keyword">const</span> webview = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;webview&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*--------------------- 侧边栏模型切换功能 -------------------*/</span></span><br><span class="line"><span class="comment">// 功能说明：点击不同 AI 模型按钮时，切换 WebView 加载的目标 URL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 获取所有 AI 模型按钮元素（每个按钮对应一个 AI 服务） */</span></span><br><span class="line"><span class="comment">// 月之暗面 Kimi 按钮，元素 kimi 对应，index.html 中的 &lt;button id=&quot;kimi&quot;&gt; 元素</span></span><br><span class="line"><span class="keyword">const</span> kimiButton = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;kimi&#x27;</span>);</span><br><span class="line"><span class="comment">// ...其他按钮定义（结构相同）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 为每个模型按钮绑定点击事件 */</span></span><br><span class="line"><span class="comment">// Kimi 按钮点击事件：用户点击index.html中的 kimi 元素，renderer.js 接收到信号，加载官方页面</span></span><br><span class="line">kimiButton.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  webview.<span class="title function_">setAttribute</span>(<span class="string">&#x27;src&#x27;</span>, <span class="string">&quot;https://kimi.moonshot.cn/&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...其他按钮事件监听逻辑（模式相同，加载对应服务 URL）</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*--------------------- 侧边栏设置功能 -----------------------*/</span></span><br><span class="line"><span class="comment">// 功能说明：处理设置相关按钮的点击事件（主页/手册/代理/版本）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 获取设置按钮元素 */</span></span><br><span class="line"><span class="keyword">const</span> homeBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;home-btn&#x27;</span>);       <span class="comment">// 主页按钮</span></span><br><span class="line"><span class="keyword">const</span> setProxyBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;set-proxy-btn&#x27;</span>); <span class="comment">// 代理按钮</span></span><br><span class="line"><span class="keyword">const</span> manualBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;manual-btn&#x27;</span>);   <span class="comment">// 手册按钮</span></span><br><span class="line"><span class="keyword">const</span> versionBtn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;version-btn&#x27;</span>); <span class="comment">// 版本按钮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 主页按钮点击事件：加载本地 second.html 页面 */</span></span><br><span class="line">homeBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  webview.<span class="property">src</span> = <span class="string">&#x27;second.html&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 用户手册按钮点击事件：加载本地 PDF 文件 */</span></span><br><span class="line">manualBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  webview.<span class="property">src</span> = <span class="string">&#x27;../../assets/Readme.pdf&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 代理设置按钮点击事件：通过预加载脚本与主进程通信 */</span></span><br><span class="line">setProxyBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 调用预加载脚本暴露的 openProxyDialog 方法</span></span><br><span class="line">  <span class="comment">// 通信流程：渲染进程 -&gt; preload.js -&gt; 主进程 ipcMain -&gt; 创建代理窗口</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">electron</span>.<span class="title function_">openProxyDialog</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 版本信息按钮点击事件：通过预加载脚本与主进程通信 */</span></span><br><span class="line">versionBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 调用预加载脚本暴露的 openVersionDialog 方法</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">electron</span>.<span class="title function_">openVersionDialog</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>



<blockquote>
<p> preload.js 分析</p>
</blockquote>
<div class="highlight-wrap" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment"> * 预加载脚本 (preload.js)</span></span><br><span class="line"><span class="comment"> * 作用：在渲染进程和主进程之间建立安全可控的通信桥梁</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入 Electron 模块</span></span><br><span class="line"><span class="keyword">const</span> &#123; contextBridge, ipcRenderer &#125; = <span class="built_in">require</span>(<span class="string">&quot;electron&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 使用上下文桥接技术安全暴露 IPC 方法到渲染进程</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">contextBridge.<span class="title function_">exposeInMainWorld</span>(<span class="string">&quot;electron&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 打开代理设置窗口</span></span><br><span class="line"><span class="comment">   * 通信流程：</span></span><br><span class="line"><span class="comment">   * 渲染进程 -&gt; preload.js -&gt; 主进程 (ipcMain.handle(&#x27;open-proxy-dialog&#x27;))</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">openProxyDialog</span>: <span class="function">() =&gt;</span> ipcRenderer.<span class="title function_">invoke</span>(<span class="string">&#x27;open-proxy-dialog&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 设置网络代理</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">proxyAddress</span> - 代理地址 (格式：host:port)</span></span><br><span class="line"><span class="comment">   * 通信流程：</span></span><br><span class="line"><span class="comment">   * 渲染进程 -&gt; 主进程 (ipcMain.handle(&#x27;set-proxy&#x27;))</span></span><br><span class="line"><span class="comment">   * 主进程通过 session.setProxy 应用代理设置</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">setProxy</span>: <span class="function">(<span class="params">proxyAddress</span>) =&gt;</span> ipcRenderer.<span class="title function_">invoke</span>(<span class="string">&#x27;set-proxy&#x27;</span>, proxyAddress),</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 清除代理设置</span></span><br><span class="line"><span class="comment">   * 通信流程：</span></span><br><span class="line"><span class="comment">   * 渲染进程 -&gt; 主进程 (ipcMain.handle(&#x27;clear-proxy&#x27;))</span></span><br><span class="line"><span class="comment">   * 主进程通过 session.setProxy(&#123;&#125;) 重置代理</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">clearProxy</span>: <span class="function">() =&gt;</span> ipcRenderer.<span class="title function_">invoke</span>(<span class="string">&#x27;clear-proxy&#x27;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 打开版本信息窗口</span></span><br><span class="line"><span class="comment">   * 通信流程：</span></span><br><span class="line"><span class="comment">   * 渲染进程 -&gt; 主进程 (ipcMain.handle(&#x27;open-version-dialog&#x27;))</span></span><br><span class="line"><span class="comment">   * 主进程创建 about 窗口</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">openVersionDialog</span>: <span class="function">() =&gt;</span> ipcRenderer.<span class="title function_">invoke</span>(<span class="string">&#x27;open-version-dialog&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></div>



<h4 id="3-2-5-自定义"><a href="#3-2-5-自定义" class="headerlink" title="3.2.5 自定义"></a>3.2.5 自定义</h4><p>若需要加入个人习惯的程序， 只需修改两部分代码即可</p>
<p>1）index.html 中的 <div class="ai_module"> 中添加一个 <div class="icon-item"></p>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/2.png" data-caption="2"><img src="/../images/ai/ai_talk/2.png" alt="2"></a></p>
<p>2）renderer.js 中添加 index 的按钮元素以及需要加载的链接即可</p>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/3.png" data-caption="3"><img src="/../images/ai/ai_talk/3.png" alt="3"></a></p>
<p>例子：添加 deepseek 大模型</p>
<p>1）修改 index.html 添加 deepseek 按钮元素</p>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/4.png" data-caption="4"><img src="/../images/ai/ai_talk/4.png" alt="4"></a></p>
<p>2）renderer.js 中添加index.html 按钮元素，并指定跳转的 url</p>
<p><a data-fancybox="gallery" data-src="/../images/ai/ai_talk/5.png" data-caption="5"><img src="/../images/ai/ai_talk/5.png" alt="5"></a></p>
<h2 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h2><p>本项目基于个人使用习惯驱动，Ai 时代，简单的重复性和文字性的工作不应该浪费我们的时间。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript>
        </div>
    </div>





        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/search/">搜索</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/about/">关于</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">一、前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%A8%8B%E5%BA%8F%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.</span> <span class="toc-text">二、程序介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%AE%80%E4%BB%8B"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 功能介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 大模型使用规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%BA%90%E7%A0%81%E5%90%AF%E5%8A%A8"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 源码启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E6%89%93%E5%8C%85"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 打包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">三、开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-Electron-%E5%AE%89%E8%A3%85"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 Electron 安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-Node-%E5%AE%89%E8%A3%85"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1 Node 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-%E5%88%9D%E5%A7%8B%E5%8C%96-Electron-%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2 初始化 Electron 项目</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%9C%AC%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 本项目开发流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E6%A0%91"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 项目文件树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E7%A8%8B%E5%BA%8F%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 程序核心流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-3-%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 主要功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-4-%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4 代码分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-5-%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="toc-number">3.2.5.</span> <span class="toc-text">3.2.5 自定义</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">四、总结</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&text=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&is_video=false&description=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=应用开发- Ai Talk 应用开发流程记录文档&body=Check out this article: http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&title=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&name=应用开发- Ai Talk 应用开发流程记录文档&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://example.com/2025/01/21/Ai%20Talk%20%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/&t=应用开发- Ai Talk 应用开发流程记录文档"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
      <div class="footer-left">
        Copyright &copy;
        
        
        2022-2025
        Funsiooo
      </div>
      <div class="footer-right">
        <nav>
          <ul>
            <!--
          --><li><a href="/">首页</a></li><!--
        --><!--
          --><li><a href="/archives/">归档</a></li><!--
        --><!--
          --><li><a href="/search/">搜索</a></li><!--
        --><!--
          --><li><a href="/tags/">标签</a></li><!--
        --><!--
          --><li><a href="/about/">关于</a></li><!--
        -->
          </ul>
        </nav>        
      </div>

      <div class="footer-midle">
        <nav>
          <ul>
            
              <!-- 不蒜子统计 -->
              <span id="busuanzi_container_site_pv">
                  本站总访问量<span id="busuanzi_value_site_pv"></span>次
              </span>
              <span class="post-meta-divider">|</span>
              <span id="busuanzi_container_site_uv" style='display:none'>
                      本站访客数<span id="busuanzi_value_site_uv"></span>人
              </span>
              <span id="busuanzi_container_page_pv">
			  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	      </span>
            <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            
          </ul>
        </nav>
      </div>
</footer>
    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板！\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功！");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

  <script type="text/javascript">
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?47a5bc2b41144f91553c5eefd4999c0d";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
        </script>

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'boom';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->

<!-- FancyBox -->

<script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script>


</body>
</html>
